@page "/index.html"
@page "/"

@using AlpinioTemplateCustom
@using OdisTemplateCustom.Components.Layout

@layout MainLayoutIndex

@attribute [StreamRendering]
@rendermode InteractiveServer

<!-- SIDEBAR - START -->
<!-- MAIN MENU - START -->
<!-- MAIN MENU - END -->
<!--  SIDEBAR - END --><!-- SIDEBAR - START -->
<!-- MAIN MENU - START -->
<!-- MAIN MENU - END -->
<!--  SIDEBAR - END -->

<link href="assets/css/ng-placeholder.css?v=@version" type="text/css" rel="stylesheet" />

<style>
    .carousel-container {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        overflow: hidden;
        touch-action: pan-y; /* Permitir gestos horizontales */
    }

    .carousel-track {
        display: flex;
        transition: transform 0.4s ease-in-out;
        width: 100%;
    }

    .carousel-item {
        flex: 0 0 100%;
        position: relative;
    }

        .carousel-item img {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

    .item-description {
        position: absolute;
        bottom: 0;
        width: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px;
        text-align: center;
    }

    .carousel-indicators {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 8px;
    }

    .indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.5);
        cursor: pointer;
    }

        .indicator.active {
            background-color: white;
        }

    .carousel-control {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: rgba(0, 0, 0, 0.3);
        color: white;
        border: none;
        padding: 10px 15px;
        cursor: pointer;
        font-size: 20px;
    }

    .prev {
        left: 10px;
    }

    .next {
        right: 10px;
    }
</style>

<div class="content-area">

    <h1 class="white-text center welcome-logo index-welcome">
        <svg xmlns="http://www.w3.org/2000/svg" width="400.000000pt" height="400.000000pt" viewBox="0 0 400.000000 400.000000" preserveAspectRatio="xMidYMid meet">
            <g transform="translate(0.000000,400.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
                <path d="M1810 3566 c0 -3 13 -24 29 -48 16 -24 34 -62 41 -84 l12 -42 101 -7 c248 -17 377 -112 444 -325 37 -121 43 -235 43 -931 l0 -676 49 -7 c27 -4 75
-15 107 -26 31 -11 59 -20 61 -20 2 0 2 343 0 763 -3 722 -5 766 -24 842 -45 182 -95 285 -182 374 -130 134 -294 191 -547 191 -74 0 -134 -2 -134 -4z" />
                <path d="M1482 3541 c-55 -14 -110 -58 -142 -114 -87 -152 22 -337 200 -337 133 0 230 99 230 234 0 138 -150 251 -288 217z" />
                <path d="M1226 3093 c-4 -9 -16 -62 -26 -118 -19 -94 -20 -148 -20 -971 0 -819 1 -876 19 -975 39 -208 90 -318 197 -425 76 -77 164 -127 279 -159 79 -22 361 -32 448 -16 79 15 167 42 167 51 0 3 -22 16 -48 28 -26 12 -71 41 -99 65 l-51 44 -64 -9 c-34 -5 -103 -6 -153 -3 -258 19 -391 134 -451 390 -18 75 -19 134 -19 995 0 503 3 931 6 950 6 33 5 36 -34 54 -22 11 -63 41 -91 68 -27 26 -51 48 -52 48 -1 0 -5 -8 -8 -17z" />
                <path d="M2356 1304 c-27 -9 -61 -23 -75 -31 -53 -33 -123 -110 -149 -163 -24 -48 -27 -67 -27 -155 0 -87 3 -107 26 -155 103 -215 370 -276 563 -129 86 66 136 170 136 284 0 98 -27 170 -90 238 -101 111 -246 153 -384 111z" />
            </g>
        </svg>Odis
    </h1>

    <div class="fullfixed index-carousel">

        <div class="carousel carousel-fullscreen carousel-slider">

            <a class="carousel-item" href="#carousel-slide-0!">
                <div class="bg" style="background-image: url('assets/images/full-1.jpg')"></div>
                <div class="item-content center-align white-text">

                    <h3>Odis is an Elegant & Stylish PWA Mobile App</h3>

                </div>

            </a>
            <a class="carousel-item" href="#carousel-slide-1!">
                <div class="bg" style="background-image: url('assets/images/full-2.jpg')"></div>
                <div class="item-content center-align white-text">

                    <h3>A premium multi purpose PWA Mobile UI App</h3>

                </div>

            </a>
            <a class="carousel-item" href="#carousel-slide-2!">
                <div class="bg" style="background-image: url('assets/images/full-3.jpg')"></div>
                <div class="item-content center-align white-text">

                    <h3>Odis is fast, secure and user friendly UI App</h3>

                </div>

            </a>
            <a class="carousel-item" href="#carousel-slide-3!">
                <div class="bg" style="background-image: url('assets/images/full-4.jpg')"></div>
                <div class="item-content center-align white-text">

                    <h3>A modern looking responsive PWA Mobile App</h3>

                </div>

            </a>
        </div>
    </div>

    <div class="wave-bg">
        <div></div>
    </div>

    <div class="center index-start">
        <a href="ui-pages-home.html" class='waves-light btn-large bg-primary'>
            Get Started
        </a>
        <a href="ui-pages-login.html" class='login-link'>Already a member? Sign In</a>  <a href="ui-pages-register.html" class='register-link'>Register</a>

    </div>

</div>

@code {
    private DotNetObjectReference<Index> objRef=default!;
    private IJSObjectReference? _module;
    private string version = AppVersion.Version;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await InitializeTemplate();
    }

    #region template
    async protected Task InitializeTemplate()
    {
        if (_module == null)
            _module = await _JS.InvokeAsync<IJSObjectReference>("import", "./js/main.js");
        await _module.InvokeVoidAsync("initTemplate");
    }
    #endregion

    #region carousel
    private List<CarouselItem> items = new List<CarouselItem>();
    private int currentIndex = 0;
    
    [JSInvokable]
    public void HandleSwipe(string direction)
    {
        if (direction == "left")
        {
            NextSlide();
        }
        else if (direction == "right")
        {
            PreviousSlide();
        }

        StateHasChanged();
    }

    private void NextSlide()
    {
        currentIndex = (currentIndex + 1) % items.Count;
    }

    private void PreviousSlide()
    {
        currentIndex = (currentIndex - 1 + items.Count) % items.Count;
    }

    private void GoToSlide(int index)
    {
        currentIndex = index;
    }

    public class CarouselItem
    {
        public int Id { get; set; }
        public string ImageUrl { get; set; }
        public string Description { get; set; }
    }
    #endregion

    public async ValueTask DisposeAsync()
    {
        if (_module is not null)
        {
            await _module.DisposeAsync();
        }
    }
}